<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spanish Sentence Builder</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        h1 {
            text-align: center;
            color: #2d3748;
            margin-bottom: 30px;
            font-size: 2.5em;
            font-weight: 300;
        }

        .section {
            margin-bottom: 30px;
        }

        .section-title {
            font-size: 1.2em;
            font-weight: 600;
            margin-bottom: 15px;
            color: #4a5568;
        }

        .word-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
            margin-bottom: 20px;
        }

        .word-button {
            padding: 12px 16px;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .word-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .subject {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .verb {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
        }

        .object {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
        }

        .sentence-builder {
            background: #f7fafc;
            border: 2px dashed #cbd5e0;
            border-radius: 15px;
            padding: 30px;
            text-align: center;
            margin: 30px 0;
            min-height: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-wrap: wrap;
            gap: 15px;
        }

        .sentence-part {
            padding: 12px 20px;
            border-radius: 10px;
            font-size: 18px;
            font-weight: 600;
            min-width: 80px;
            text-align: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .selected-subject {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .selected-verb {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
        }

        .selected-object {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
        }

        .clear-button {
            background: linear-gradient(135deg, #fc466b 0%, #3f5efb 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            margin: 20px auto;
            display: block;
            transition: all 0.3s ease;
        }

        .clear-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }

        .placeholder {
            color: #a0aec0;
            font-style: italic;
        }

        .conjugation-info {
            background: #edf2f7;
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
            font-size: 14px;
            color: #4a5568;
        }

        .add-vocab-section {
            background: #f0fff4;
            border: 2px solid #68d391;
            border-radius: 15px;
            padding: 25px;
            margin: 30px 0;
        }
        .add-noun-section {
            background: #ebf8ff;
            border: 2px solid #63b3ed;
            border-radius: 15px;
            padding: 25px;
            margin: 30px 0;
        }

        .add-vocab-title, .add-noun-title {
            color: #2f855a;
            font-size: 1.3em;
            font-weight: 600;
            margin-bottom: 20px;
            text-align: center;
        }
        .add-noun-title {
            color: #2b6cb0;
        }

        .vocab-form, .noun-form {
            display: grid;
            grid-template-columns: 1fr 1fr auto;
            gap: 15px;
            align-items: end;
        }
        .noun-form {
            grid-template-columns: 1fr auto; /* Nouns don't have a 'type' select */
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-label {
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 8px;
            font-size: 14px;
        }

        .form-input {
            padding: 12px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        .form-input:focus {
            outline: none;
            border-color: #68d391;
        }
        .form-input.noun-input:focus {
            border-color: #63b3ed;
        }

        .form-select {
            padding: 12px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 16px;
            background: white;
            cursor: pointer;
        }

        .add-button {
            background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            height: fit-content;
            transition: transform 0.3s ease;
        }
        .add-button.noun-button {
            background: linear-gradient(135deg, #4299e1 0%, #3182ce 100%);
        }

        .add-button:hover {
            transform: translateY(-2px);
        }

        .custom-verbs, .custom-nouns {
            margin-top: 20px;
        }

        .custom-verb-tag, .custom-noun-tag {
            display: inline-block;
            background: #68d391;
            color: white;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            margin: 4px;
            position: relative;
        }
        .custom-noun-tag {
            background: #63b3ed;
        }

        .remove-verb, .remove-noun {
            margin-left: 8px;
            cursor: pointer;
            font-weight: bold;
        }

        .toggle-vocab, .toggle-noun {
            background: linear-gradient(135deg, #38a169 0%, #2f855a 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            margin: 20px auto;
            display: block;
            transition: all 0.3s ease;
        }
        .toggle-noun {
            background: linear-gradient(135deg, #3182ce 0%, #2b6cb0 100%);
        }

        .toggle-vocab:hover, .toggle-noun:hover {
            transform: translateY(-2px);
        }

        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üåü Constructor de Oraciones en Espa√±ol</h1>
        
        <div class="section">
            <div class="section-title">üìç Sujeto (Subject)</div>
            <div class="word-grid">
                <button class="word-button subject" onclick="selectSubject('yo')">yo</button>
                <button class="word-button subject" onclick="selectSubject('t√∫')">t√∫</button>
                <button class="word-button subject" onclick="selectSubject('√©l')">√©l</button>
                <button class="word-button subject" onclick="selectSubject('ella')">ella</button>
                <button class="word-button subject" onclick="selectSubject('nosotros')">nosotros</button>
                <button class="word-button subject" onclick="selectSubject('vosotros')">vosotros</button>
                <button class="word-button subject" onclick="selectSubject('ellos')">ellos</button>
                <button class="word-button subject" onclick="selectSubject('ellas')">ellas</button>
            </div>
        </div>

        <div class="section">
            <div class="section-title">‚ö° Verbo (Verb)</div>
            <div class="word-grid" id="verbGrid">
                <button class="word-button verb" onclick="selectVerb('hablar')">hablar</button>
                <button class="word-button verb" onclick="selectVerb('comer')">comer</button>
                <button class="word-button verb" onclick="selectVerb('vivir')">vivir</button>
                <button class="word-button verb" onclick="selectVerb('estudiar')">estudiar</button>
                <button class="word-button verb" onclick="selectVerb('trabajar')">trabajar</button>
                <button class="word-button verb" onclick="selectVerb('beber')">beber</button>
                <button class="word-button verb" onclick="selectVerb('escribir')">escribir</button>
                <button class="word-button verb" onclick="selectVerb('leer')">leer</button>
            </div>
        </div>

        <div class="section">
            <div class="section-title">üéØ Objeto (Object)</div>
            <div class="word-grid" id="objectGrid">
                <button class="word-button object" onclick="selectObject('el libro')">el libro</button>
                <button class="word-button object" onclick="selectObject('la comida')">la comida</button>
                <button class="word-button object" onclick="selectObject('el espa√±ol')">el espa√±ol</button>
                <button class="word-button object" onclick="selectObject('la m√∫sica')">la m√∫sica</button>
                <button class="word-button object" onclick="selectObject('el agua')">el agua</button>
                <button class="word-button object" onclick="selectObject('la carta')">la carta</button>
                <button class="word-button object" onclick="selectObject('el trabajo')">el trabajo</button>
                <button class="word-button object" onclick="selectObject('la pel√≠cula')">la pel√≠cula</button>
            </div>
        </div>

        <div class="sentence-builder" id="sentenceBuilder">
            <span class="placeholder">Selecciona las palabras para construir tu oraci√≥n...</span>
        </div>

        <button class="clear-button" onclick="clearSentence()">üîÑ Limpiar Oraci√≥n</button>

        <button class="toggle-vocab" onclick="toggleVocabSection()">‚ûï A√±adir Verbos</button>

        <div class="add-vocab-section hidden" id="vocabSection">
            <div class="add-vocab-title">üå± A√±ade tus propios verbos</div>
            
            <div class="vocab-form">
                <div class="form-group">
                    <label class="form-label">Verbo (infinitivo)</label>
                    <input type="text" class="form-input" id="newVerb" placeholder="ej: caminar, correr, salir...">
                </div>
                
                <div class="form-group">
                    <label class="form-label">Tipo de verbo</label>
                    <select class="form-select" id="verbType">
                        <option value="regular-ar">Regular -AR (como hablar)</option>
                        <option value="regular-er">Regular -ER (como comer)</option>
                        <option value="regular-ir">Regular -IR (como vivir)</option>
                        <option value="irregular">Irregular (necesita conjugaciones especiales)</option>
                    </select>
                </div>
                
                <button class="add-button" onclick="addNewVerb()">‚ûï A√±adir</button>
            </div>

            <div class="custom-verbs" id="customVerbs">
                <div style="font-weight: 600; color: #2d3748; margin-bottom: 10px;">Verbos a√±adidos:</div>
            </div>
        </div>

        <button class="toggle-noun" onclick="toggleNounSection()">‚ûï A√±adir Sustantivos</button>

        <div class="add-noun-section hidden" id="nounSection">
            <div class="add-noun-title">üìö A√±ade tus propios sustantivos</div>
            
            <div class="noun-form">
                <div class="form-group">
                    <label class="form-label">Sustantivo</label>
                    <input type="text" class="form-input noun-input" id="newNoun" placeholder="ej: la casa, el perro, las flores...">
                </div>
                
                <button class="add-button noun-button" onclick="addNewNoun()">‚ûï A√±adir</button>
            </div>

            <div class="custom-nouns" id="customNouns">
                <div style="font-weight: 600; color: #2d3748; margin-bottom: 10px;">Sustantivos a√±adidos:</div>
            </div>
        </div>


        <div class="conjugation-info" id="conjugationInfo" style="display: none;">
            <strong>üí° Informaci√≥n de conjugaci√≥n:</strong>
            <div id="conjugationDetails"></div>
        </div>
    </div>

    <script>
        let selectedSubject = null;
        let selectedVerb = null;
        let selectedObject = null;
        let customVerbs = [];
        let customNouns = []; // New array for custom nouns

        // Conjugation engine for regular verbs
        function conjugateRegularVerb(verb, type, subject) {
            const stem = verb.slice(0, -2); // Remove -ar, -er, or -ir
            
            const endings = {
                'regular-ar': {
                    'yo': 'o', 't√∫': 'as', '√©l': 'a', 'ella': 'a',
                    'nosotros': 'amos', 'vosotros': '√°is', 'ellos': 'an', 'ellas': 'an'
                },
                'regular-er': {
                    'yo': 'o', 't√∫': 'es', '√©l': 'e', 'ella': 'e',
                    'nosotros': 'emos', 'vosotros': '√©is', 'ellos': 'en', 'ellas': 'en'
                },
                'regular-ir': {
                    'yo': 'o', 't√∫': 'es', '√©l': 'e', 'ella': 'e',
                    'nosotros': 'imos', 'vosotros': '√≠s', 'ellos': 'en', 'ellas': 'en'
                }
            };

            return stem + endings[type][subject];
        }

        // Generate full conjugation for a verb
        function generateConjugation(verb, type) {
            if (type === 'irregular') {
                return {
                    'yo': `${verb}*`, 't√∫': `${verb}*`, '√©l': `${verb}*`, 'ella': `${verb}*`,
                    'nosotros': `${verb}*`, 'vosotros': `${verb}*`, 'ellos': `${verb}*`, 'ellas': `${verb}*`
                };
            }

            const conjugation = {};
            const subjects = ['yo', 't√∫', '√©l', 'ella', 'nosotros', 'vosotros', 'ellos', 'ellas'];
            
            subjects.forEach(subject => {
                conjugation[subject] = conjugateRegularVerb(verb, type, subject);
            });

            return conjugation;
        }

        const conjugations = {
            'hablar': {
                'yo': 'hablo', 't√∫': 'hablas', '√©l': 'habla', 'ella': 'habla',
                'nosotros': 'hablamos', 'vosotros': 'habl√°is', 'ellos': 'hablan', 'ellas': 'hablan'
            },
            'comer': {
                'yo': 'como', 't√∫': 'comes', '√©l': 'come', 'ella': 'come',
                'nosotros': 'comemos', 'vosotros': 'com√©is', 'ellos': 'comen', 'ellas': 'comen'
            },
            'vivir': {
                'yo': 'vivo', 't√∫': 'vives', '√©l': 'vive', 'ella': 'vive',
                'nosotros': 'vivimos', 'vosotros': 'viv√≠s', 'ellos': 'viven', 'ellas': 'viven'
            },
            'estudiar': {
                'yo': 'estudio', 't√∫': 'estudias', '√©l': 'estudia', 'ella': 'estudia',
                'nosotros': 'estudiamos', 'vosotros': 'estudi√°is', 'ellos': 'estudian', 'ellas': 'estudian'
            },
            'trabajar': {
                'yo': 'trabajo', 't√∫': 'trabajas', '√©l': 'trabaja', 'ella': 'trabaja',
                'nosotros': 'trabajamos', 'vosotros': 'trabaj√°is', 'ellos': 'trabajan', 'ellas': 'trabajan'
            },
            'beber': {
                'yo': 'bebo', 't√∫': 'bebes', '√©l': 'bebe', 'ella': 'bebe',
                'nosotros': 'bebemos', 'vosotros': 'beb√©is', 'ellos': 'beben', 'ellas': 'beben'
            },
            'escribir': {
                'yo': 'escribo', 't√∫': 'escribes', '√©l': 'escribe', 'ella': 'escribe',
                'nosotros': 'escribimos', 'vosotros': 'escrib√≠s', 'ellos': 'escriben', 'ellas': 'escriben'
            },
            'leer': {
                'yo': 'leo', 't√∫': 'lees', '√©l': 'lee', 'ella': 'lee',
                'nosotros': 'leemos', 'vosotros': 'le√©is', 'ellos': 'leen', 'ellas': 'leen'
            }
        };

        const defaultObjects = ['el libro', 'la comida', 'el espa√±ol', 'la m√∫sica', 'el agua', 'la carta', 'el trabajo', 'la pel√≠cula'];

        function selectSubject(subject) {
            selectedSubject = subject;
            updateSentence();
        }

        function selectVerb(verb) {
            selectedVerb = verb;
            updateSentence();
        }

        function selectObject(object) {
            selectedObject = object;
            updateSentence();
        }

        function updateVerbGrid() {
            const verbGrid = document.getElementById('verbGrid');
            
            // Clear existing verbs
            verbGrid.innerHTML = '';
            
            // Add default verbs
            const defaultVerbs = ['hablar', 'comer', 'vivir', 'estudiar', 'trabajar', 'beber', 'escribir', 'leer'];
            defaultVerbs.forEach(verb => {
                const button = document.createElement('button');
                button.className = 'word-button verb';
                button.textContent = verb;
                button.onclick = () => selectVerb(verb);
                verbGrid.appendChild(button);
            });
            
            // Add custom verbs
            customVerbs.forEach(verbData => {
                const button = document.createElement('button');
                button.className = 'word-button verb';
                button.textContent = verbData.verb;
                button.onclick = () => selectVerb(verbData.verb);
                button.style.background = 'linear-gradient(135deg, #48bb78 0%, #38a169 100%)';
                verbGrid.appendChild(button);
            });
        }

        function updateObjectGrid() {
            const objectGrid = document.getElementById('objectGrid');
            
            // Clear existing objects
            objectGrid.innerHTML = '';
            
            // Add default objects
            defaultObjects.forEach(object => {
                const button = document.createElement('button');
                button.className = 'word-button object';
                button.textContent = object;
                button.onclick = () => selectObject(object);
                objectGrid.appendChild(button);
            });
            
            // Add custom objects
            customNouns.forEach(noun => {
                const button = document.createElement('button');
                button.className = 'word-button object';
                button.textContent = noun;
                button.onclick = () => selectObject(noun);
                button.style.background = 'linear-gradient(135deg, #4299e1 0%, #3182ce 100%)'; // New color for custom nouns
                objectGrid.appendChild(button);
            });
        }

        function toggleVocabSection() {
            const section = document.getElementById('vocabSection');
            section.classList.toggle('hidden');
        }

        function toggleNounSection() {
            const section = document.getElementById('nounSection');
            section.classList.toggle('hidden');
        }

        function addNewVerb() {
            const verbInput = document.getElementById('newVerb');
            const typeSelect = document.getElementById('verbType');
            
            const verb = verbInput.value.trim().toLowerCase();
            const type = typeSelect.value;
            
            if (!verb) {
                alert('Por favor, introduce un verbo');
                return;
            }
            
            // Check if verb already exists
            if (conjugations[verb] || customVerbs.some(v => v.verb === verb)) {
                alert('Este verbo ya existe');
                return;
            }
            
            // Validate verb ending
            const validEndings = {
                'regular-ar': 'ar',
                'regular-er': 'er', 
                'regular-ir': 'ir'
            };
            
            if (type !== 'irregular' && !verb.endsWith(validEndings[type])) {
                alert(`Los verbos ${type} deben terminar en -${validEndings[type]}`);
                return;
            }
            
            // Generate conjugation and add to system
            const newConjugation = generateConjugation(verb, type);
            conjugations[verb] = newConjugation;
            
            // Add to custom verbs list
            customVerbs.push({ verb, type });
            
            // Update UI
            updateVerbGrid();
            updateCustomVerbsDisplay();
            
            // Clear form
            verbInput.value = '';
            typeSelect.value = 'regular-ar';
            
            alert(`¬°Verbo "${verb}" a√±adido correctamente!`);
        }

        function addNewNoun() {
            const nounInput = document.getElementById('newNoun');
            
            const noun = nounInput.value.trim().toLowerCase();
            
            if (!noun) {
                alert('Por favor, introduce un sustantivo');
                return;
            }
            
            // Check if noun already exists
            if (defaultObjects.includes(noun) || customNouns.includes(noun)) {
                alert('Este sustantivo ya existe');
                return;
            }
            
            // Add to custom nouns list
            customNouns.push(noun);
            
            // Update UI
            updateObjectGrid();
            updateCustomNounsDisplay();
            
            // Clear form
            nounInput.value = '';
            
            alert(`¬°Sustantivo "${noun}" a√±adido correctamente!`);
        }

        function updateCustomVerbsDisplay() {
            const container = document.getElementById('customVerbs');
            const title = container.querySelector('div');
            
            // Clear existing tags, preserving the title
            const existingTags = container.querySelectorAll('.custom-verb-tag');
            existingTags.forEach(tag => tag.remove());
            
            customVerbs.forEach((verbData, index) => {
                const tag = document.createElement('span');
                tag.className = 'custom-verb-tag';
                tag.innerHTML = `${verbData.verb} (${verbData.type}) <span class="remove-verb" onclick="removeCustomVerb(${index})">√ó</span>`;
                container.appendChild(tag);
            });
        }

        function updateCustomNounsDisplay() {
            const container = document.getElementById('customNouns');
            const title = container.querySelector('div');

            // Clear existing tags, preserving the title
            const existingTags = container.querySelectorAll('.custom-noun-tag');
            existingTags.forEach(tag => tag.remove());
            
            customNouns.forEach((noun, index) => {
                const tag = document.createElement('span');
                tag.className = 'custom-noun-tag';
                tag.innerHTML = `${noun} <span class="remove-noun" onclick="removeCustomNoun(${index})">√ó</span>`;
                container.appendChild(tag);
            });
        }

        function removeCustomVerb(index) {
            const verbData = customVerbs[index];
            
            // Remove from conjugations
            delete conjugations[verbData.verb];
            
            // Remove from custom verbs
            customVerbs.splice(index, 1);
            
            // Update UI
            updateVerbGrid();
            updateCustomVerbsDisplay();
            
            // Clear selection if it was the removed verb
            if (selectedVerb === verbData.verb) {
                selectedVerb = null;
                updateSentence();
            }
        }

        function removeCustomNoun(index) {
            const noun = customNouns[index];
            
            // Remove from custom nouns
            customNouns.splice(index, 1);
            
            // Update UI
            updateObjectGrid();
            updateCustomNounsDisplay();
            
            // Clear selection if it was the removed noun
            if (selectedObject === noun) {
                selectedObject = null;
                updateSentence();
            }
        }

        function updateSentence() {
            const builder = document.getElementById('sentenceBuilder');
            const info = document.getElementById('conjugationInfo');
            const details = document.getElementById('conjugationDetails');
            
            if (!selectedSubject && !selectedVerb && !selectedObject) {
                builder.innerHTML = '<span class="placeholder">Selecciona las palabras para construir tu oraci√≥n...</span>';
                info.style.display = 'none';
                return;
            }

            let sentenceHTML = '';
            
            if (selectedSubject) {
                sentenceHTML += `<span class="sentence-part selected-subject">${selectedSubject}</span>`;
            }
            
            if (selectedVerb && selectedSubject) {
                const conjugatedVerb = conjugations[selectedVerb]?.[selectedSubject];
                if (conjugatedVerb) {
                    sentenceHTML += `<span class="sentence-part selected-verb">${conjugatedVerb}</span>`;
                    
                    // Show conjugation info
                    info.style.display = 'block';
                    const verbData = customVerbs.find(v => v.verb === selectedVerb);
                    const verbType = verbData ? `(${verbData.type})` : '(verbo predeterminado)';
                    
                    details.innerHTML = `
                        <strong>${selectedVerb}</strong> ${verbType} conjugado con <strong>${selectedSubject}</strong> = <strong>${conjugatedVerb}</strong>
                        <br><small>Presente de indicativo</small>
                    `;
                } else {
                    sentenceHTML += `<span class="sentence-part selected-verb">${selectedVerb} (conjugaci√≥n no disponible)</span>`;
                    info.style.display = 'none';
                }
            } else if (selectedVerb) {
                sentenceHTML += `<span class="sentence-part selected-verb">${selectedVerb} (infinitivo)</span>`;
                info.style.display = 'none';
            } else {
                info.style.display = 'none'; // Hide info if no verb selected or subject is missing for conjugation
            }
            
            if (selectedObject) {
                sentenceHTML += `<span class="sentence-part selected-object">${selectedObject}</span>`;
            }

            if (sentenceHTML) {
                builder.innerHTML = sentenceHTML;
            } else {
                builder.innerHTML = '<span class="placeholder">Selecciona las palabras para construir tu oraci√≥n...</span>';
            }
        }

        function clearSentence() {
            selectedSubject = null;
            selectedVerb = null;
            selectedObject = null;
            updateSentence();
        }

        // Initialize the grids on load
        document.addEventListener('DOMContentLoaded', () => {
            updateVerbGrid();
            updateObjectGrid();
            updateCustomVerbsDisplay();
            updateCustomNounsDisplay();
        });
    </script>
</body>
</html>
